<div class="animated fadeIn">
  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-header">
          <div class="row">
            <div class="col-md-7">
              <div class="row">
                <div class="col-md-1" [ngStyle]="{'margin-top': '-8px', 'float': 'right'}">
                  <i class="fa fa-filter fa-lg mt-4" [ngStyle]="{ 'float': 'right', 'cursor': 'pointer'}"
                     tooltip="Tìm kiếm."
                     placement="top"
                     (click)="isCollapsed = !isCollapsed"></i>
                </div>
                <div class="col-md-11" [ngStyle]="{'margin-top': '13px', 'height':'0px'}">
                  <h6>Có tất cả {{listPeople.length}} người</h6>
                </div>
              </div>
            </div>
            <div class="col-md-5 ">
              <div class="limit">
                <h6 class="show-limit">Show</h6>
                <select name="show" class="select-limit show-limit" (change)="showChoose($event.currentTarget.value)">
                  <option value="5" select>5</option>
                  <option value="10">10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="0">Tất cả</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        <div class="card-body" [collapse]="isCollapsed">
          <p>
            Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet
            dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper
            suscipit lobortis nisl ut aliquip ex ea commodo
            consequat.
          </p>
        </div>
        <div class="card-body" *ngIf="listPeople.length > 0">
          <table class="table table-body-list">
            <thead>
            <tr>
              <th [ngStyle]="{'width': '33px'}"><input [ngStyle]="{'width': '20px', 'height': '20px'}" type="checkbox" name="vehicle1"></th>
              <th *ngIf=" status != 'f1'"><strong>Bệnh nhân</strong></th>
              <th><strong>Tên</strong></th>
              <th><strong>Tuổi</strong></th>
              <th><strong>Địa chỉ</strong></th>
              <th><strong>Tình trạng</strong></th>
              <th *ngIf="status != 'f1'"><strong>Loại</strong></th>
              <th></th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of listPeople | paginate: { itemsPerPage: itemsInPage, currentPage: p }">
              <td><input type="checkbox" name="vehicle1" value="{{item.idPeople}}"></td>
              <td *ngIf="status != 'f1'">BN{{item.idPeople}}</td>
              <td>{{item.name}}</td>
              <td>{{item.age}}</td>
              <td>{{item.nameProvince}}</td>
              <td *ngIf="item.status == 'sick'">Đang điều trị</td>
              <td *ngIf="item.status == 'f1'">Đang cách ly</td>
              <td *ngIf="item.status == 'cured'">Đã khỏi bệnh</td>
              <td *ngIf="item.status != 'f1'">{{item.type ? 'Lây nhiễm trong nước' : 'Sau khi nhập cảnh'}}</td>
              <td class="option-td">
                <div class="btn-group" dropdown>
                  <button dropdownToggle class="option-btn">...</button>
                  <ul *dropdownMenu class="dropdown-menu dropdown" role="menu">
                    <li role="menuitem" data-toggle="modal" (click)="peopleDetailModel.show()">
                      <span class="dropdown-item" (click)="getPeopleDetail(item.idPeople)">
                        <i class="fa fa-eye"></i> Xem chi tiết
                      </span>
                    </li>
                    <li role="menuitem">
                       <span class="dropdown-item">
                         <i class="fas fa-edit"></i> Sửa
                      </span>
                    </li>
                    <li role="menuitem" data-toggle="modal" (click)="DeletePeopleModal.show()">
                       <span class="dropdown-item" (click)="choicePeople(item.idPeople)">
                       <i class="fas fa-trash-alt"></i> Xóa
                      </span>
                    </li>
                  </ul>
                </div>
              </td>
            </tr>
            </tbody>
          </table>
          <div class="page" [ngStyle]="{'text-align': 'center'}">
            <pagination-controls (pageChange)="p = $event" previousLabel="Trước"
                                 nextLabel="Tiếp theo"></pagination-controls>
          </div>
        </div>
        <div class="card-body" *ngIf="listPeople.length <= 0">
          <h4 class="">Không có ai !!!</h4>
        </div>
      </div>
    </div>
  </div>
</div>

<div bsModal #DeletePeopleModal="bs-modal" class="modal fade alert-model" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-danger" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" *ngIf="status == 'sick'">Xóa người bệnh này khỏi danh sách ?</h4>
        <h4 class="modal-title" *ngIf="status == 'f1'">Xóa người này khỏi danh sách cách ly ?</h4>
      </div>
      <div class="modal-body" *ngIf="status == 'sick'">
        <p> Nếu xóa bệnh nhân này thì sẽ xóa hết các
          trường hợp f1 có liên quan đến bệnh nhân khỏi danh sách.</p>
      </div>
      <div>
        <div class="modal-footer" [ngStyle]="{'text-align': 'center'}">
          <div>
            <button type="button" class="btn btn-secondary" (click)="DeletePeopleModal.hide()">Hủy</button>
            <button type="button" class="btn btn-danger" (click)="deletePeople()">Xác nhận</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div bsModal #peopleDetailModel="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Thông tin chi tiết</h4>
        <button type="button" class="close" (click)="peopleDetailModel.hide()" aria-label="Close">
          <span aria-hidden="true">x</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row" *ngIf="peopleDetail.status == 'sick'">
          <p class="col-md-2 col-xs-2 col-lg-2 ">Bệnh nhân :</p>
          <p><strong>BN{{peopleDetail.idPeople}}</strong></p>
        </div>
        <div class="row">
          <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <div class="Container row ">
              <p class="col-md-3 col-xs-3 col-lg-3 ">Tên :</p>
              <p><strong>{{peopleDetail.name}}</strong></p>
            </div>
          </div>
          <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
            <div class="Container row ">
              <p class="col-md-4 col-xs-4 col-lg-4 ">Tuổi :</p>
              <p><strong>{{peopleDetail.age}}</strong></p>
            </div>
          </div>
          <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
            <div class="Container row ">
              <p class="col-md-6 col-xs-6 col-lg-6 ">Giới tính :</p>
              <p><strong>{{peopleDetail.name ? 'Nam' : 'Nữ'}}</strong></p>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="peopleDetail.phone.length ==10">
          <p class="col-md-2 col-xs-2 col-lg-2 ">Số điện thoại :</p>
          <p><strong>{{peopleDetail.phone}}</strong></p>
        </div>
        <div class="row">
          <p class="col-md-2 col-xs-2 col-lg-2">Địa chỉ:</p>
          <p [ngStyle]="{'margin-left': '-48px'}"><strong>{{peopleDetail.commune}}</strong></p>
          <p>, <strong>{{peopleDetail.district}}</strong></p>
          <p>, <strong>{{peopleDetail.province}}</strong></p>
        </div>
        <div class="row">
          <p class="col-md-4 col-xs-4 col-lg-4">Lịch trình di chuyển:</p>
          <div class="col-md-12 col-xs-12 col-lg-12" [ngStyle]="{'margin-top': '-14px'}">
            <div class="container people-detail-schedule">
              <p class="col-md-12 col-xs-12 col-lg-12">{{peopleDetail.schedule}}</p>
            </div>
          </div>
        </div>
        <div class="row">
          <p class="col-md-3 col-xs-3 col-lg-3 " *ngIf="peopleDetail.status == 'sick'">Ngày nhập viện :</p>
          <p class="col-md-3 col-xs-3 col-lg-3 " *ngIf="peopleDetail.status == 'f1'">Ngày cách ly :</p>
          <p class="col-md-3 col-xs-3 col-lg-3 " *ngIf="peopleDetail.status == 'cured'">Ngày xuất viện :</p>
          <p [ngStyle]="{'margin-left': '-48px'}"><strong>{{peopleDetail.time | date:'MM/dd/yyyy' : 'ICT'}}</strong>
          </p>
        </div>
        <div class="row">
          <p class="col-md-2 col-xs-2 col-lg-2 ">Tình trạng :</p>
          <p *ngIf="peopleDetail.status == 'sick'"><strong>Đang điều trị</strong></p>
          <p *ngIf="peopleDetail.status == 'f1'"><strong>Đang cách ly</strong></p>
          <p *ngIf="peopleDetail.status == 'cured'"><strong>Đã khỏi</strong></p>
        </div>
        <div class="row" *ngIf="peopleDetail.status != 'f1'">
          <p class="col-md-2 col-xs-2 col-lg-2 ">Loại : </p>
          <p><strong>{{peopleDetail.type ? 'Lây nhiễm trong nước' : 'Sau khi nhập cảnh'}}</strong></p>
        </div>
        <div class="row" *ngIf="peopleDetail.type">
          <p class="col-md-2 col-xs-2 col-lg-2 ">Nguồn lây : </p>
          <p><strong>BN{{peopleDetail.idSource}} - {{peopleDetail.nameSource}}</strong></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="peopleDetailModel.hide()">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>
